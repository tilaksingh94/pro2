{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport GetRequest from '../config/api/AuthorizedGet';\nimport PostData from '../config/api/AuthorizedPost';\nimport { message, Spin, Avatar } from 'antd';\nimport BaseURL from '../config/api/BaseUrl';\n\nvar ProfilePicture = /*#__PURE__*/function (_Component) {\n  _inherits(ProfilePicture, _Component);\n\n  function ProfilePicture(props) {\n    var _this;\n\n    _classCallCheck(this, ProfilePicture);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProfilePicture).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"fileSelectedHandler\", function (event) {\n      var file = event.target.files[0];\n\n      if (file) {\n        var isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n        var isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJpgOrPng) {\n          return message.error('You can only upload JPG/PNG file!');\n        } else if (!isLt2M) {\n          return message.error('Image must smaller than 2MB!');\n        } else {\n          _this.setState({\n            loading: true\n          });\n\n          var form_data = new FormData();\n          form_data.append('profile_image', event.target.files[0], event.target.files[0].name);\n          form_data.append('entity_id_fk', localStorage.getItem('entity_id_fk'));\n          fetch(BaseURL('UploadProfileImage'), {\n            method: 'post',\n            headers: {\n              'Authorization': 'Bearer ' + localStorage.getItem('token')\n            },\n            body: form_data\n          }).then(function (response) {\n            return response.json();\n          }).then(function (res) {\n            _this.setState({\n              loading: false,\n              imageUrl: res.data.image\n            });\n\n            message.success('Profile picture has been updated.');\n          })[\"catch\"](function (error) {\n            _this.setState({\n              loading: false\n            }); // console.log(error);\n\n\n            message.error(error);\n          });\n        }\n      }\n    });\n\n    _this.state = {\n      items: [],\n      error: null,\n      loading: true,\n      imageUrl: null\n    };\n    _this.fileSelectedHandler = _this.fileSelectedHandler.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ProfilePicture, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      GetRequest('details', 'GET', null).then(function (result) {\n        _this2.setState({\n          loading: false,\n          items: result.data,\n          imageUrl: result.data.image\n        });\n      }, function (error) {\n        _this2.setState({\n          loading: false,\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var imageUrl = this.state.imageUrl;\n      return __jsx(\"div\", {\n        className: \"card display_img\"\n      }, __jsx(Spin, {\n        spinning: this.state.loading\n      }, __jsx(\"img\", {\n        className: \"card-img-top\",\n        src: imageUrl,\n        alt: \"Card image\"\n      }), __jsx(\"div\", {\n        className: \"card-body text-center\"\n      }, __jsx(\"input\", {\n        style: {\n          display: 'none'\n        },\n        accept: \"image/*\",\n        type: \"file\",\n        ref: function ref(fileInput) {\n          return _this3.fileInput = fileInput;\n        },\n        onChange: this.fileSelectedHandler\n      }), __jsx(Avatar, {\n        icon: \"camera\",\n        onClick: function onClick() {\n          return _this3.fileInput.click();\n        },\n        className: \"profile_img\",\n        style: {\n          backgroundColor: '#096dd9'\n        }\n      }))));\n    }\n  }]);\n\n  return ProfilePicture;\n}(Component);\n\nexport { ProfilePicture as default };","map":null,"metadata":{},"sourceType":"module"}