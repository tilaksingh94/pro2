{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport GetRequest from '../config/api/AuthorizedGet';\nimport PostData from '../config/api/AuthorizedPost';\nimport { message, Spin, Avatar } from 'antd';\nimport BaseURL from '../config/api/BaseUrl';\nexport default class ProfilePicture extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"fileSelectedHandler\", event => {\n      const file = event.target.files[0];\n\n      if (file) {\n        const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n        const isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJpgOrPng) {\n          return message.error('You can only upload JPG/PNG file!');\n        } else if (!isLt2M) {\n          return message.error('Image must smaller than 2MB!');\n        } else {\n          this.setState({\n            loading: true\n          });\n          const form_data = new FormData();\n          form_data.append('profile_image', event.target.files[0], event.target.files[0].name);\n          form_data.append('entity_id_fk', localStorage.getItem('entity_id_fk'));\n          fetch(BaseURL('UploadProfileImage'), {\n            method: 'post',\n            headers: {\n              'Authorization': 'Bearer ' + localStorage.getItem('token')\n            },\n            body: form_data\n          }).then(response => response.json()).then(res => {\n            this.setState({\n              loading: false,\n              imageUrl: res.data.image\n            });\n            message.success('Profile picture has been updated.');\n          }).catch(error => {\n            this.setState({\n              loading: false\n            }); // console.log(error);\n\n            message.error(error);\n          });\n        }\n      }\n    });\n\n    this.state = {\n      items: [],\n      error: null,\n      loading: true,\n      imageUrl: null\n    };\n    this.fileSelectedHandler = this.fileSelectedHandler.bind(this);\n  }\n\n  componentDidMount() {\n    GetRequest('details', 'GET', null).then(result => {\n      this.setState({\n        loading: false,\n        items: result.data,\n        imageUrl: result.data.image\n      });\n    }, error => {\n      this.setState({\n        loading: false,\n        error\n      });\n    });\n  }\n\n  render() {\n    const {\n      imageUrl\n    } = this.state;\n    return __jsx(\"div\", {\n      className: \"card display_img\"\n    }, __jsx(Spin, {\n      spinning: this.state.loading\n    }, __jsx(\"img\", {\n      className: \"card-img-top\",\n      src: imageUrl,\n      alt: \"Card image\"\n    }), __jsx(\"div\", {\n      className: \"card-body text-center\"\n    }, __jsx(\"input\", {\n      style: {\n        display: 'none'\n      },\n      accept: \"image/*\",\n      type: \"file\",\n      ref: fileInput => this.fileInput = fileInput,\n      onChange: this.fileSelectedHandler\n    }), __jsx(Avatar, {\n      icon: \"camera\",\n      onClick: () => this.fileInput.click(),\n      className: \"profile_img\",\n      style: {\n        backgroundColor: '#096dd9'\n      }\n    }))));\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}